<div class="header">
  <p-autoComplete
    [ngModel]="searchInput | async"
    [suggestions]="userSuggestions()"
    placeholder="Search"
    field="_id"
    [delay]="500"
    (completeMethod)="searchInput.next($event.query)"
    (onSelect)="createChat($event)"
  >
    <ng-template let-user pTemplate="item">
      <div class="user-suggestion">
        <app-avatar class="avatar" [user]="user" [description]="user.email" />
      </div>
    </ng-template>
  </p-autoComplete>
</div>
<div class="list">
  @if (loading()) {
    @for (item of [0, 0, 0, 0]; track $index) {
      <p-skeleton [style]="{ width: '100%', height: '5rem' }" />
    }
  } @else {
    @for (chat of chats(); track chat._id) {
      <app-chat-preview [ngClass]="{ selected: selectedChat()?._id === chat._id }" [chat]="chat" (click)="selectChat(chat)" />
    } @empty {
      <div class="empty">Start a conversation</div>
    }
  }
</div>
